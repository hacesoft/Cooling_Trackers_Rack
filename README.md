# Cooling_Trackers_Rack
Cooling of Trackers in the Rack



```
[{"id":"963735aa2c2813dd","type":"function","z":"6cf0017697520c44","name":"SUB_TrackerS","func":"//*****************************************************************************\n//\n// File Name        : 'Chlazeni MPTT trakeru'\n// Title            : Cooling of Trackers in the Rack\n// Author           : http://www.prochazka.zde.cz -> hacesoft 2023\n// Created          : 21-10-2023, 11:00\n// Revised          : 21-10¨8-2023, 18:58\n// Version          : 1.00\n// Target Platfirm  : Node-RED\n//\n// This code is distributed under the GNU Public License\n// Vsechny informace jsou zahrnuty pod GPL licenci, pokud není explicitne uveden jiný typ licence.\n// Pouzivání techto stránek ke komercním �celum lze jen se souhlasem autora.\n// Vsechna práva vyhrazena (c) 1997 - 2023 hacesoft.\n//\n//*****************************************************************************\nconst nRelayNumber = 0;\nconst sIpAddress = \"192.168.11.6\";\nvar sTurn = \"off\";  // Výchozí hodnota\nvar nLastChangeTime = null;  // Proměnná pro sledování času od poslední změny\nvar nHysteresisTime = 300;  // Hystereze v sekundách\n\nvar nOutput1 = msg.payload.JV; // Výkon z prvého trackeru\nvar nOutput2 = msg.payload.WEST; // Výkon z druhého trackeru\nvar nCelkem = nOutput1 + nOutput2;\n\n// Zkontroluj, zda nCelkem je větší než 1000 a jestli uplynulo alespoň čas hystereze od poslední změny\nif (nCelkem >= 1000) {\n    if (nLastChangeTime === null) {\n        nLastChangeTime = Date.now();\n    } else {\n        const nCurrentTime = Date.now();\n        const nTimeSinceLastChange = nCurrentTime - nLastChangeTime;\n        if (nTimeSinceLastChange >= nHysteresisTime * 1000) {  // Převeď čas hystereze na milisekundy\n            sTurn = \"on\";\n            nLastChangeTime = null;  // Resetuj čas od poslední změny\n        }\n    }\n} else {\n    sTurn = \"off\";\n    nLastChangeTime = null;  // Resetuj čas od poslední změny\n}\nmsg._url = `http://${sIpAddress}/relay/${nRelayNumber}?turn=${sTurn}`;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":340,"wires":[["810a6386fa6f0485","6d949c46f8659f66"]]}]
```
